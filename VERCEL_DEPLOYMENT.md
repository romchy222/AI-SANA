# Vercel Deployment Guide

Этот файл содержит инструкции по развертыванию BolashakChat на Vercel.

## Подготовка к развертыванию

### 1. Подготовка базы данных

Для продакшена рекомендуется использовать PostgreSQL. Вы можете получить бесплатную базу данных от:

- **Neon** (https://neon.tech) - рекомендуется
- **Supabase** (https://supabase.com)
- **Railway** (https://railway.app)
- **ElephantSQL** (https://www.elephantsql.com)

### 2. Настройка переменных среды в Vercel

В панели управления Vercel добавьте следующие переменные среды:

#### Обязательные переменные:
```
DATABASE_URL=postgresql://username:password@hostname:5432/database_name
SESSION_SECRET=your-super-secret-production-session-key
MISTRAL_API_KEY=your-mistral-api-key-here
FLASK_ENV=production
```

#### Дополнительные переменные (смотрите .env.vercel):
```
DB_TYPE=postgresql
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Lax
```

### 3. Развертывание

1. Подключите ваш GitHub репозиторий к Vercel
2. Vercel автоматически обнаружит `vercel.json` конфигурацию
3. Добавьте переменные среды в настройках проекта
4. Запустите развертывание

### 4. Файлы конфигурации

- `vercel.json` - основная конфигурация Vercel
- `vercel_app.py` - точка входа для Vercel
- `requirements.txt` - зависимости Python
- `.env.vercel` - пример переменных среды

### 5. Особенности развертывания

- Статические файлы обслуживаются из папки `/static`
- Максимальное время выполнения функции: 30 секунд
- Используется PostgreSQL для продакшена
- Включены настройки безопасности для cookies

### 6. Послы развертывания

После успешного развертывания:
1. Проверьте подключение к базе данных
2. Убедитесь, что все статические файлы загружаются
3. Протестируйте основные функции чат-бота
4. Проверьте работу всех агентов

### Troubleshooting

**Проблема**: База данных не подключается
**Решение**: Проверьте формат DATABASE_URL и доступность базы данных

**Проблема**: Статические файлы не загружаются  
**Решение**: Убедитесь, что настройки routes в vercel.json корректны

**Проблема**: Таймаут функции
**Решение**: Оптимизируйте запросы к базе данных или увеличьте лимит времени

## Поддержка

Для получения помощи создайте issue в репозитории проекта.